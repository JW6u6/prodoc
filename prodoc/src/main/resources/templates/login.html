<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link href="/css/toggleClass.css" rel="stylesheet" />
</head>
<!-- 해야 할 목록
■ 회원가입 이메일
■ 로그인: java -> 비밀번호 암호화-비교
■ 로그인 (1)이메일
□ 로그인 (2)카카오 연동
□ 로그인 (3)구글 연동
□ 아이디 / 비밀번호 찾기
□ css
 -->
<body>
    <div> <!-- 로그인 영역 -->
        <div>
	        <div>
	        	<form	method="post"	action="/login" >
	            <input type="text" id="email" name="email" value="user1@user1">
	            <input type="password" id="password" name="password" value="1234">
	            <button type="submit" id="loginBtn">로그인</button>
	            <button type="button" id="joinBtn">회원가입</button>
	        	</form>
		        <p id="failMsg" th:text="${errorMsg}" style="color:red;"></p>
	        </div>
            <p id="find" style="color:gray;">이메일/비밀번호 찾기</p>
            
            <button type="button" id="googleBtn">구글 로그인</button>
            <button type="button" id="kakaoBtn" style="background-color:#FEE500; border:0px; padding: 10px">카카오 로그인</button>
        </div>
        <div> <!-- prodoc 로고 이미지 -->
        	<img src="">
        </div>
    </div>


 	<div id="findUserInfo" style="border:1px solid black" class="hide"> <!--아이디비번찾기 모달창-->
 		<div><button class="closeBtn">&#10005;</button></div>
 		
        <button type="button" class="findBtn">Email찾기</button>
        <button type="button" class="findBtn">PW찾기</button>

        <!--이메일 찾기-->
        <div id="findEmail">
            <input name="phone" id="phone" placeholder="-없이 연락처 입력">
            <button type="button" id="phoneAuth">인증번호 받기</button>
        	<input name="authInput" placeholder="인증번호">
        	<button type="button" class="authCheck">확인</button>
            <p id="showEmail" style="display:none"></p>
        </div>
        <!--비밀번호 찾기-->
        <div id="findPW" class="hide">
            <input name="emailMd" id="emailMd" placeholder="EMAIL 입력" >
            <button type="button" id="emailAuth" >인증번호 받기</button>
	        <input name="authInput" placeholder="인증번호">
	        <button type="button" class="authCheck">확인</button>
	        <input name="newPW" id="newPW" placeholder="새비밀번호">
	        <input name="newPWCheck" id="newPWCheck" placeholder="비밀번호확인">
        </div>        

        <button type="button" id="closeFind">확인</button>
    </div>


<script src="js/modal/close.js"></script>
<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
<script>
//아이디, 비밀번호 찾기
let findMd = document.getElementById("findUserInfo"); //모달창
let find = document.getElementById("find");			  //p태그 <-버튼효과
find.addEventListener('click', function(e){
	if(findMd.className == 'view'){
		findMd.className = 'hide';
	}else{		
		findMd.className = 'view';
	}
});

//찾기 창 내 토글 버튼
let emailType = document.querySelector("#findEmail");	//이메일 찾기: id findEmail
let pwType = document.querySelector("#findPW") 			//비밀번호 찾기: id findPW
document.querySelectorAll(".findBtn").forEach((tag,idx) => {	
	tag.addEventListener('click', function(e){
		if(idx == 0){	//아이디 찾기
			emailType.className = "view";
			pwType.className = "hide";
		}else{			//비밀번호 찾기
			emailType.className = "hide";
			pwType.className = "view";
		}
	});
});

//회원가입 버튼
let joinBtn = document.getElementById("joinBtn");
joinBtn.addEventListener('click', function(e){		//1)회원가입 모달창 팝업
	document.location.href = "/join"
});
//

//카카오로그인
window.Kakao.init("250e6ec18ab563f59e7bf3d2479ad0e7");
let kakaoBtn = document.getElementById("kakaoBtn");
kakaoBtn.addEventListener('click', function(e){
	window.Kakao.Auth.login({
		scope: 'profile_nickname, profile_image, account_email, birthday',	//로그인 시 받아오는 정보 변수	
		success : function(user){
			console.log(user);
			window.Kakao.API.request({
				url: '/v2/user/me',
				success: res =>{
					const kakao_account = res.kakao_account;
					console.log(kakao_account);
					//DB 저장 -> 이메일 체크
				}
			});
		}
	});
});

//구글로그인
let googleBtn = document.getElementById("googleBtn");
googleBtn.addEventListener('click', function(e){
	
});
</script>
</body>
</html>